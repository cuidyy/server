# 《用户文件远程安全存储服务需求说明文档》

## 一、项目概述
本项目旨在开发一个用户文件远程安全存储服务系统，允许用户通过客户端将图片上传至服务端进行安全存储，并提供一系列操作接口以便用户管理和获取图片资源。服务端将对用户信息和图片数据进行安全处理，包括用户账号密码的校验、图片加密存储等功能，客户端与服务端之间通过 TCP 协议进行通信以实现数据交互。


## 二、功能需求

### （一）客户端功能
1. **用户校验**
    - 呈现用户登录界面，供用户输入由服务端分配的账号与密码。
    - 客户端把账号密码信息依约定格式封装后传输至服务端予以校验。
    - 依照服务端返回的校验结果，若校验成功则跳转至系统主界面，若失败则提示用户重新输入。
2. **图片上传**
    - 在主界面设置图片上传功能入口，支持用户选取单张或多张图片开展上传操作。
    - 运用 TCP 协议把图片数据上传至服务端。针对所选图片，客户端获取其二进制数据，并依据 TCP 协议进行数据封装与发送。
    - 上传进程中展示上传进度信息，上传完毕后接收并显示服务端反馈的上传结果（成功或失败）。
3. **用户图片列表获取与展示**
    - 客户端可向服务端发送获取用户自身图片列表的请求。
    - 接收服务端传回的图片列表数据，于客户端界面特定区域以列表形式呈现，展示图片文件名。
4. **图片展示**
    - 在客户端界面展示已上传图片的列表。
    - 当用户双击已上传图片列表中的某张图片时，客户端通过 TCP 连接向服务端发送获取该图片完整内容的请求。
    - 接收服务端返回的经过解密处理的图片内容数据，并在客户端的图片展示区域中展示完整的图片。

### （二）服务端功能
1. **用户管理**
    - **预设账号密码与数据库存储**：于 MySQL 数据库创建用户表，预先存储若干预设账号和密码信息，密码以 MD5 加密形式存储。
    - **用户注册 API**：接收客户端发送的用户注册请求，获取注册信息中的账号和密码，对密码进行 MD5 加密处理后，将用户信息插入到 MySQL 用户表中。若插入成功，返回注册成功消息给客户端；若插入失败（如账号已存在等原因），则返回注册失败消息。
    - **API 用户校验**：接收客户端发来的用户校验请求，解析出账号和密码信息，在 MySQL 用户表中查询对应账号记录，并将客户端传来密码的 MD5 值与数据库中存储的密码进行比对。根据比对结果返回校验成功或失败消息给客户端。
2. **图片处理**
    - **图片上传 API**：接收客户端通过 TCP 上传的图片数据。首先依据图片名在 MySQL 资源表中查询图片是否已存在，若已存在则直接返回上传成功消息给客户端；若不存在，则将图片记录插入到 MySQL 资源表中，同时运用 AES128 加密算法对图片数据进行加密处理后保存到服务器指定存储位置。若图片数据保存成功，则返回上传成功消息；若保存失败，则返回上传失败消息。
    - **用户图片列表获取**：接收客户端获取图片列表的请求，根据请求中的用户名信息在 MySQL 资源表中查询该用户上传的所有图片记录，将查询结果整理成约定格式（如 JSON）后返回给客户端。
    - **图片内容获取接口**：接收客户端获取图片内容的请求，从请求中解析出图片 ID，根据图片 ID 在 MySQL 资源表中查询图片的存储地址信息，依据存储地址从服务器存储位置读取加密的图片数据，运用 AES128 解密算法对图片数据进行解密处理后返回给客户端。

## 三、性能需求
1. **响应时间**：用户校验、图片上传、获取用户图片列表以及获取图片内容等操作的平均响应时间应控制在 3 秒以内，保障用户操作的流畅性。
2. **数据准确性**：在用户信息管理和图片数据处理进程中，确保数据的完整性与准确性，防止数据丢失或错误存储。例如，图片上传后应能完整、正确地保存，用户列表信息应与数据库中的记录一致。

## 四、安全需求
1. **用户认证与授权**：采用账号密码认证方式对用户进行身份验证，唯有通过校验的用户方可进行后续操作，杜绝非法用户访问系统资源。
2. **数据加密**：用户密码在数据库中以 MD5 加密存储，图片数据在传输过程中和服务器存储时均采用 AES128 加密算法进行加密处理，确保数据的保密性，防止数据被窃取或篡改。
3. **访问控制**：依据用户角色（普通用户）对其操作权限予以限制，普通用户仅能操作自身上传的图片资源，无法访问其他用户的图片，保障用户数据的隐私性。

## 五、界面需求
1. **客户端界面**：采用简洁直观的图形化界面设计，便于用户操作。登录界面包含账号输入框、密码输入框和登录按钮；主界面有图片上传按钮、用户图片列表展示区域以及图片展示区域等。各界面元素布局合理，颜色搭配协调，文字提示清晰明了。

## 六、数据存储需求
1. **MySQL 数据库**：用于存储用户信息和图片资源相关数据。用户表包含字段如用户 ID、账号、密码（MD5 加密）；资源表包含字段如图片 ID、用户名、图片名、存储地址等。合理设计数据库表结构与索引，提升数据查询和操作的效率。
2. **图片存储**：在服务器本地磁盘上开辟专门的存储区域用于保存加密后的图片数据，存储路径和文件名应与数据库中记录的存储地址信息相对应，确保能够精准地读取和写入图片数据。

## 七、网络需求
1. **通信协议**：客户端与服务端之间仅通过 TCP 协议进行通信，保障数据传输的可靠性与完整性。
2. **网络端口**：服务端监听特定的网络端口（如 TCP 端口 8080），客户端通过该端口与服务端建立连接并进行数据传输。确保网络端口在服务器防火墙设置中已开放，且网络环境稳定可靠，防止因网络故障导致数据传输中断或错误。

---

以上文档根据修改要求进行了调整，在实际开发过程中可依据具体状况进一步细化与完善。 